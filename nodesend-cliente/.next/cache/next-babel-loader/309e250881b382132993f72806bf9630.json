{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/Layout';\nimport clienteAxios from '../../config/axios';\nimport React, { useState, useContext } from 'react';\nimport appContext from '../../context/app/appContext';\nimport Alerta from '../../components/Alerta';\nexport var __N_SSP = true;\nexport function getServerSidePaths() {\n  return _getServerSidePaths.apply(this, arguments);\n}\n\nfunction _getServerSidePaths() {\n  _getServerSidePaths = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var enlaces;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return clienteAxios.get('/api/enlaces');\n\n          case 2:\n            enlaces = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              paths: enlaces.data.enlaces.map(function (enlace) {\n                return {\n                  params: {\n                    enlace: enlace.url\n                  }\n                };\n              }),\n              fallback: false\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getServerSidePaths.apply(this, arguments);\n}\n\nexport default (function (_ref) {\n  var enlace = _ref.enlace;\n  // Context de la app\n  var AppContext = useContext(appContext);\n  var mostrarAlerta = AppContext.mostrarAlerta,\n      mensaje_archivo = AppContext.mensaje_archivo;\n\n  var _useState = useState(enlace.password),\n      tienePassword = _useState[0],\n      setTienePassword = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  console.log(tienePassword); //  console.log(enlace);\n\n  var verificarPassword = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var data, resultado;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              data = {\n                password: password\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return clienteAxios.post(\"/api/enlaces/\".concat(enlace.enlace), data);\n\n            case 5:\n              resultado = _context.sent;\n              setTienePassword(resultado.data.password);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              mostrarAlerta(_context.t0.response.data.msg);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 9]]);\n    }));\n\n    return function verificarPassword(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, null, tienePassword ? __jsx(React.Fragment, null, __jsx(\"p\", {\n    className: \"text-center\"\n  }, \"Este enlace esta protegido por un password, colocalo a continuaci\\xF3n\"), mensaje_archivo && __jsx(Alerta, null), __jsx(\"div\", {\n    className: \"flex justify-center mt-5\"\n  }, __jsx(\"div\", {\n    className: \"w-full max-w-lg\"\n  }, __jsx(\"form\", {\n    className: \"bg-white rounded shadow-md px-8 pt-6 pb-8 mb-4\",\n    onSubmit: function onSubmit(e) {\n      return verificarPassword(e);\n    }\n  }, __jsx(\"div\", {\n    className: \"mb-4\"\n  }, __jsx(\"label\", {\n    className: \"block text-black text-sm font-bold mb-2\",\n    htmlFor: \"password\"\n  }, \"Password\"), __jsx(\"input\", {\n    type: \"password\",\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"password\",\n    placeholder: \"Password del enlace\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    }\n  })), __jsx(\"input\", {\n    type: \"submit\",\n    className: \"bg-red-500 hover:bg-gray-900 w-full p-2 text-white uppercase font-bold\",\n    value: \"Validar Password...\"\n  }))))) : __jsx(React.Fragment, null, __jsx(\"h1\", {\n    className: \"text-4xl text-center text-gray-700\"\n  }, \"Descarga tu archivo:\"), __jsx(\"div\", {\n    className: \"flex items-center justify-center mt-10\"\n  }, __jsx(\"a\", {\n    href: \"\".concat(process.env.backendURL, \"/api/archivos/\").concat(enlace.archivo),\n    className: \"bg-red-500 text-center px-10 py-3 rounded uppercase font-bold text-white cursor-pointer\",\n    download: true\n  }, \"Aqu\\xED\"))));\n});","map":null,"metadata":{},"sourceType":"module"}